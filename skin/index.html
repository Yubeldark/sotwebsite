<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quel skin ?</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" href="../images/favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <img src="../images/logo_sotdle.png" alt="Logo SOTDLE" class="site-logo" onclick="window.location.href='../index.html'"/>

  <div class="game-container">
    <h1>üé® Quel skin ?</h1>
    <p>Devine le skin myst√®re en utilisant les indices de chaque tentative !</p>
    
    <!-- Remplacer le select par un input et une liste de suggestions -->
    <div class="search-container">
      <input type="text" id="skinInput" placeholder="Entrez un nom de skin..." autocomplete="off">
      <ul id="suggestionList"></ul>
    </div>
    
    <table id="guessTable">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Cat√©gorie</th>
          <th>Sous-cat√©gorie</th>
          <th>Couleur</th>
          <th>Date d'apparition</th>
          <th>Obtention</th>
          <th>Monnaie</th>
          <th>Image</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    
    <div id="feedback"></div>
    <div id="attempts"></div>
    <button id="resetButton" style="display: none;">Essayer √† nouveau</button>
  </div>

  <script>
    const skins = {
      "Voiles des Sombres aventuriers": {
        nom: "Voiles des Sombres aventuriers",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Voile",
        couleur: ["Noir", "Gris"],
        date: "Saison 1",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/voiles_des_sombres_aventuriers.png"
      },
      "Tromblon de Minuit": {
        nom: "Tromblon de Minuit",
        categorie: "Armurerie",
        sousCategorie: "Tromblon",
        couleur: ["Noir", "Gris", "Vert"],
        date: "Lancement",
        obtention: "Code, Giveaway",
        prix: "-",
        image: "../images/tromblon_de_minuit.png"
      },
      "M√®ches blanches de la brigade des cloches": {
        nom: "M√®ches blanches de la brigade des cloches",
        categorie: "Malle d'accessoires",
        sousCategorie: "Coiffure",
        couleur: [ ],
        date: "Saison 5",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/bell_brigade_streaked_hair.png"
      },
      "Arquebuse √† mire d'Obsidienne": {
        nom: "Arquebuse √† mire d'Obsidienne",
        categorie: "Armurerie",
        sousCategorie: "Arquebuse",
        couleur: ["Noir", "Gris", "Vert"],
        date: "Lancement",
        obtention: "Code, Giveaway",
        prix: "-",
        image: "../images/arquebuse_a_mire_d_obsidienne.png"
      },
      "Voiles de l'√¢ge d'or": {
        nom: "Voiles de l'√¢ge d'or",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Voile",
        couleur: ["Beige"],
        date: "Saison 9",
        obtention: "Plunder Pass",
        prix: "-",
        image: "../images/voiles_de_l_age_d_or.png"
      },
      "Pantalon du Silver Blade": {
        nom: "Pantalon du Silver Blade",
        categorie: "Coffre de V√™tements",
        sousCategorie: "Pantalon",
        couleur: ["Gris"],
        date: "Lancement",
        obtention: "R√©compense",
        prix: "-",
        image: "../images/pantalonsilver.png"
      },
      "Mal√©diction Cendr√©e": {
        nom: "Mal√©diction Cendr√©e",
        categorie: "Malle d'accessoires",
        sousCategorie: "Mal√©diction",
        couleur: ["Rouge"],
        date: "Heart of Fire",
        obtention: "Promotion",
        prix: "-",
        image: "../images/ashencurse.png"
      },
      "Barbe de l'Horizon Gel√©": {
        nom: "Barbe de l'Horizon Gel√©",
        categorie: "Malle d'accessoires",
        sousCategorie: "Barbe",
        couleur: ["Bleu"],
        date: "Festival of Giving 2020",
        obtention: "Twitch Drops",
        prix: "-",
        image: "../images/barbegel.png"
      },
      "Coque de la Com√®re Radieuse": {
        nom: "Coque de la Com√®re Radieuse",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Coque",
        couleur: ["Violet"],
        date: "Saison 13",
        obtention: "Pirate Emporium",
        prix: "Pi√®ces Anciennes",
        image: "../images/coquecomete.png"
      },
      "Tambour d'Aristocrate": {
        nom: "Tambour d'Aristocrate",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Tambour",
        couleur: ["Blanc", "Rose"],
        date: "Saison 2",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/tambourari.png"
      },
      "Haut du corps Pardessus": {
        nom: "Haut du corps Pardessus",
        categorie: "Coffre de V√™tements",
        sousCategorie: "Torses",
        couleur: ["Gris", "Marron"],
        date: "Saison 8",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/pardessus.png"
      },
      "D√©guisement de coffre de place forte": {
        nom: "D√©guisement de coffre de place forte",
        categorie: "Malle d'accessoires",
        sousCategorie: "D√©guisement",
        couleur: ["Blanc", "Marron"],
        date: "Saison 14",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/coffreplace.png"
      },
      "Costume de capitaine du Feu de l'√¢me": {
        nom: "Costume de capitaine du Feu de l'√¢me",
        categorie: "Coffre de V√™tements",
        sousCategorie: "Costume",
        couleur: ["Vert"],
        date: "Fort of the Damned",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/steelnightmare.png"
      },
      "Pistolet √† double cannon de la main veinarde": {
        nom: "Pistolet √† double cannon de la main veinarde",
        categorie: "Armurerie",
        sousCategorie: "Pistolet √† double canon",
        couleur: ["Gris", "Marron"],
        date: "Saison 14",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/luckygun.png"
      },
      "Lanterne de navire br√ªl√©e par la neige": {
        nom: "Lanterne de navire br√ªl√©e par la neige",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Lanterne",
        couleur: ["Rouge", "Vert"],
        date: "Saison 8",
        obtention: "R√©compense",
        prix: "-",
        image: "../images/snowburn.png"
      },
      "Canon de loup de mer triomphant": {
        nom: "Canon de loup de mer triomphant",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Canon",
        couleur: ["Bleu"],
        date: "Seabound Soul",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/canontsd.png"
      },
      "Chemise de la mar√©e de l'ombre": {
        nom: "Chemise de la mar√©e de l'ombre",
        categorie: "Coffre de V√™tements",
        sousCategorie: "Chemise",
        couleur: ["Gris", "Noir"],
        date: "Saison 14",
        obtention: "Plunder Pass",
        prix: "-",
        image: "../images/shirt14.png"
      },
      "Tatouage de la b√©n√©diction sylvestre": {
        nom: "Tatouage de la b√©n√©diction sylvestre",
        categorie: "Malle d'accessoires",
        sousCategorie: "Tatouage",
        couleur: ["Noir"],
        date: "Saison 6",
        obtention: "Pirate Emporium",
        prix: "Pi√®ces Anciennes",
        image: "../images/forest.png"
      },
      "Voiles d'avant-garde": {
        nom: "Voiles d'avant-garde",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Voile",
        couleur: ["Blanc", "Gris"],
        date: "B√™ta",
        obtention: "Code",
        prix: "-",
        image: "../images/betasail.png"
      },
      "Figure de proue de l‚ÄôAffam√©": {
        nom: "Figure de proue de l‚ÄôAffam√©",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Figure de proue",
        couleur: ["Bleu", "Blanc"],
        date: "The Hungering Deep",
        obtention: "R√©compense",
        prix: "-",
        image: "../images/affame.png"
      },
      "Cache-oeil des 1000 jours": {
        nom: "Cache-oeil des 1000 jours",
        categorie: "Malle d'accessoires",
        sousCategorie: "Cache-oeil",
        couleur: ["Noir", "Jaune"],
        date: "Festival of Giving 2020",
        obtention: "R√©compense",
        prix: "-",
        image: "../images/goldenpatch.png"
      },
      "Figure de proue de d√©sosseur": {
        nom: "Figure de proue de d√©sosseur",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Figure de proue",
        couleur: ["Blanc"],
        date: "Cursed Sails",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/prouedes.png"
      },
      "Cabestan de Mercenaire": {
        nom: "Cabestan de Mercenaire",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Cabestan",
        couleur: ["Vert", "Dor√©", "Bordeaux"],
        date: "Mercenary Voyages",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/mercecapstan.png"
      },
      "Pavillon de d√©sosseur": {
        nom: "Pavillon de d√©sosseur",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Pavillon de navire",
        couleur: ["Blanc", "Rouge"],
        date: "Cursed Sails",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/flagdes.png"
      },
      "Arquebuse √† mire des cendres du Forsaken": {
        nom: "Arquebuse √† mire des cendres du Forsaken",
        categorie: "Armurerie",
        sousCategorie: "Arquebuse √† mire",
        couleur: ["Gris", "Orange"],
        date: "Forsaken Shores",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/snipefors.png"
      },
      "Voiles des cendres de Forsaken": {
        nom: "Voiles des cendres de Forsaken",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Voile",
        couleur: ["Orange", "Noir", "Marron"],
        date: "Forsaken Shores",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/voilefors.png"
      },
      "Barre des coquillages funestes": {
        nom: "Barre des coquillages funestes",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Barre",
        couleur: ["Bleu", "Gris"],
        date: "Shrouded Spoils",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/barrebleu.png"
      }, 
      "Canons des coquillages funestes": {
        nom: "Canons des coquillages funestes",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Cannon",
        couleur: ["Bleu", "Gris"],
        date: "Shrouded Spoils",
        obtention: "Shop",
        prix: "Doublons",
        image: "../images/cannonbleu.png"
      },
      "Vielle √† roue de l'Azure Scout": {
        nom: "Vielle √† roue de l'Azure Scout",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Vielle √† roue",
        couleur: ["Bleu"],
        date: "Saison 15",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/azurviel.png"
      },
      "Banjo des damn√©s": {
        nom: "Banjo des damn√©s",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Banjo",
        couleur: ["Vert"],
        date: "Saison 3",
        obtention: "Promotion",
        prix: "-",
        image: "../images/banjodamn.png"
      },
      "Accord√©on du Ph√©nix d'or": {
        nom: "Accord√©on du Ph√©nix d'or",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Accord√©on",
        couleur: ["Blanc", "Jaune"],
        date: "Saison 1",
        obtention: "Twitch Drops",
        prix: "-",
        image: "../images/gilacc.png"
      },
      "√âclat de canon orange": {
        nom: "√âclat de canon orange",
        categorie: "Personnalisation de bateau",
        sousCategorie: "√âclat de canon",
        couleur: ["Orange"],
        date: "Festival of Giving 2020",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/orangeeclat.png"
      },
      "Tapis de d√©sosseur d'obsidienne": {
        nom: "Tapis de d√©sosseur d'obsidienne",
        categorie: "D√©coration de navire",
        sousCategorie: "Tapis",
        couleur: ["Noir", "Rouge"],
        date: "Saison 13",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/obsirug.png"
      },
      "Blason de navire du Ph√©nix d'or": {
        nom: "Blason de navire du Ph√©nix d'or",
        categorie: "D√©coration de navire",
        sousCategorie: "Armoiries",
        couleur: ["Blanc", "Dor√©", "Bleu"],
        date: "Saison 14",
        obtention: "Giveaway",
        prix: "-",
        image: "../images/gilcre.png"
      },
      "Coque de mercenaire": {
        nom: "Coque de mercenaire",
        categorie: "Personnalisation de bateau",
        sousCategorie: "Coque",
        couleur: ["Blanc", "Bordeau", "Vert"],
        date: "Mercenary Voyages",
        obtention: "Shop",
        prix: "Doublon",
        image: "../images/coquemerc.png"
      },
      "Canne √† p√™che prise courageuse": {
        nom: "Canne √† p√™che prise courageuse",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Canne √† p√™che",
        couleur: ["Vert", "Bleu"],
        date: "Saison 15",
        obtention: "R√©compense",
        prix: "-",
        image: "../images/canevent.png"
      },
      "Pelle de l'ambassadeur marchand": {
        nom: "Pelle de l'ambassadeur marchand",
        categorie: "Coffre d'√©quipements",
        sousCategorie: "Pelle",
        couleur: ["Bleu", "Jaune"],
        date: "Saison 10",
        obtention: "R√©compense",
        prix: "-",
        image: "../images/pellemarch.png"
      },
      "Chapeau de Loup de mer splendide": {
        nom: "Chapeau de Loup de mer splendide",
        categorie: "Coffre de v√™tements",
        sousCategorie: "Chapeau",
        couleur: ["Rouge", "Bleu", "Dor√©"],
        date: "Anniversary Update",
        obtention: "Shop",
        prix: "Gold",
        image: "../images/splendidchap.png"
      },
    };

    // Nombre maximum de tentatives
    const MAX_ATTEMPTS = 6;
    let attempts = 0;
    let gameOver = false;
    let guessedSkins = []; // Pour stocker les skins d√©j√† tent√©s

    // Fonction pour s√©lectionner un nouveau skin al√©atoire
    function selectRandomSkin() {
      const skinNames = Object.keys(skins);
      return skinNames[Math.floor(Math.random() * skinNames.length)];
    }

    let correctName = selectRandomSkin();
    let correctSkin = skins[correctName];

    const input = document.getElementById("skinInput");
    const suggestionList = document.getElementById("suggestionList");
    const tbody = document.querySelector("#guessTable tbody");
    const feedback = document.getElementById("feedback");
    const attemptsDisplay = document.getElementById("attempts");
    const resetButton = document.getElementById("resetButton");

    // Afficher le compteur de tentatives
    attemptsDisplay.textContent = `Tentative: 0/${MAX_ATTEMPTS}`;

    // Trier les noms de skin par ordre alphab√©tique
    const sortedSkinNames = Object.keys(skins).sort();

    // Fonction pour r√©initialiser le jeu
    function resetGame() {
      // R√©initialiser les variables du jeu
      attempts = 0;
      gameOver = false;
      guessedSkins = []; // R√©initialiser la liste des skins devin√©s
      
      // S√©lectionner un nouveau skin al√©atoire
      correctName = selectRandomSkin();
      correctSkin = skins[correctName];
      
      // Effacer les r√©sultats pr√©c√©dents
      tbody.innerHTML = '';
      feedback.textContent = '';
      feedback.classList.remove('success', 'failure', 'show');
      
      // R√©initialiser l'interface
      input.disabled = false;
      input.value = '';
      attemptsDisplay.textContent = `Tentative: 0/${MAX_ATTEMPTS}`;
      attemptsDisplay.classList.remove('warning', 'danger');
      
      // Cacher le bouton de r√©initialisation
      resetButton.style.display = 'none';
      resetButton.classList.remove('replay-button', 'show');
      
      // Supprimer les containers de confettis s'il en reste
      const confettiContainers = document.querySelectorAll('.confetti-container');
      confettiContainers.forEach(container => {
        if (container.parentNode) {
          container.parentNode.removeChild(container);
        }
      });
    }

    // Gestionnaire d'√©v√©nement pour le bouton de r√©initialisation
    resetButton.addEventListener('click', resetGame);

    // Ajouter l'en-t√™te du tableau au chargement de la page
    document.addEventListener("DOMContentLoaded", function() {
      // Cr√©er l'en-t√™te du tableau s'il n'existe pas d√©j√†
      const thead = document.querySelector("#guessTable thead");
      if (thead.children.length === 0) {
        const headerRow = document.createElement("tr");
        
        // Changer "Date" par "Date d'apparition" dans les en-t√™tes
        const headers = ["Nom", "Cat√©gorie", "Sous-cat√©gorie", "Couleur", "Date d'apparition", "Obtention", "Monnaie", "Image"];
        
        headers.forEach(headerText => {
          const th = document.createElement("th");
          th.textContent = headerText;
          headerRow.appendChild(th);
        });
        
        thead.appendChild(headerRow);
      }
    });

    // Fonction pour convertir les dates en valeurs num√©riques comparables
    function convertDateToValue(dateString) {
      // Tableau des dates dans l'ordre chronologique
      const dateOrder = [
        "B√™ta",
        "Lancement",
        "The Hungering Deep",
        "Cursed Sails",
        "Forsaken Shores",
        "Shrouded Spoils",
        "Mercenary Voyages",
        "Anniversary Update",
        "Fort of the Damned",
        "Seabound Soul",
        "Crews of Rage",
        "Heart of Fire",
        "Ships of Fortune",
        "Haunted Shores", 
        "Ashen Winds",
        "Vaults of the Ancients",
        "Festival of Giving 2020", 
        "Saison 1",
        "Saison 2",
        "Saison 3",
        "Saison 4",
        "Saison 5",
        "Saison 6",
        "Saison 7",
        "Saison 8",
        "Saison 9",
        "Saison 10",
        "Saison 11",
        "Saison 12",
        "Saison 13",
        "Saison 14",
        "Saison 15"
      ];
      
      // Trouver l'index de la date dans le tableau
      const index = dateOrder.indexOf(dateString);
      
      // Si la date n'est pas trouv√©e dans le tableau, retourner une valeur √©lev√©e
      return index === -1 ? 999 : index;
    }

    // Fonction pour filtrer les suggestions bas√©es sur l'entr√©e
    function updateSuggestions(inputValue) {
      // Vider la liste de suggestions
      suggestionList.innerHTML = '';
      
      // Montrer les suggestions seulement si au moins 1 caract√®re est tap√© (au lieu de 2)
      if (inputValue.length < 1) {
        suggestionList.classList.remove('active');
        return;
      }
      
      // Filtrer les noms de skin qui commencent par l'entr√©e (insensible √† la casse)
      const inputLower = inputValue.toLowerCase();
      const filteredSkins = sortedSkinNames.filter(skin => 
        skin.toLowerCase().startsWith(inputLower) && // Filtre pour les noms qui commencent par les lettres tap√©es
        !guessedSkins.includes(skin)
      );
      
      if (filteredSkins.length === 0) {
        suggestionList.classList.remove('active');
        return;
      }
      
      // Ajouter jusqu'√† 5 suggestions
      const maxSuggestions = Math.min(5, filteredSkins.length);
      for (let i = 0; i < maxSuggestions; i++) {
        const li = document.createElement('li');
        
        // Mettre en √©vidence les caract√®res correspondant √† la recherche
        const skinName = filteredSkins[i];
        const highlightedName = `<strong>${skinName.substring(0, inputValue.length)}</strong>${skinName.substring(inputValue.length)}`;
        li.innerHTML = highlightedName;
        
        // G√©rer le clic sur une suggestion
        li.addEventListener('click', function() {
          input.value = skinName; // Utiliser le texte sans balises HTML
          suggestionList.classList.remove('active');
          checkAnswer(skinName);
        });
        
        suggestionList.appendChild(li);
      }
      
      suggestionList.classList.add('active');
    }

    // Fonction pour v√©rifier la r√©ponse
    function checkAnswer(guess) {
      if (gameOver) return;
      
      if (!guess || !skins[guess] || guessedSkins.includes(guess)) {
        input.value = '';
        return;
      }

      // Ajouter le skin √† la liste des skins devin√©s
      guessedSkins.push(guess);
      
      attempts++;
      
      // Mettre √† jour l'affichage des tentatives
      attemptsDisplay.textContent = `Tentative: ${attempts}/${MAX_ATTEMPTS}`;
      
      // Ajouter des classes d'avertissement visuel
      if (attempts >= MAX_ATTEMPTS - 1) {
        attemptsDisplay.classList.add('danger');
      } else if (attempts >= MAX_ATTEMPTS - 2) {
        attemptsDisplay.classList.add('warning');
      }

      const skin = skins[guess];
      const row = document.createElement("tr");
      row.className = "new-row"; // Ajouter la classe pour l'animation
      
      // D'abord ajouter les cellules standards
      const fields = ["nom", "categorie", "sousCategorie", "couleur", "date", "obtention", "prix"];
      fields.forEach(field => {
        const td = document.createElement("td");
        
        if (field === "couleur" && Array.isArray(skin[field])) {
          td.textContent = skin[field].join(", ");
        } else {
          td.textContent = skin[field] || "-";
        }
        
        // Ajouter des classes pour la mise en √©vidence des correspondances
        if (correctSkin[field] === skin[field] || 
            (field === "couleur" && Array.isArray(skin[field]) && 
             JSON.stringify(skin[field].sort()) === JSON.stringify(correctSkin[field].sort()))) {
          td.classList.add("correct");
        } else if (field === "couleur" && Array.isArray(skin[field]) && 
                  Array.isArray(correctSkin[field]) && 
                  skin[field].some(c => correctSkin[field].includes(c))) {
          td.classList.add("partial");
        } else {
          td.classList.add("incorrect");
          
          // Ajouter les indicateurs chronologiques pour la colonne date
          if (field === "date") {
            const guessDateValue = convertDateToValue(skin[field]);
            const correctDateValue = convertDateToValue(correctSkin[field]);
            
            // Alternative avec des caract√®res Unicode de fl√®ches
            if (guessDateValue < correctDateValue) {
              td.innerHTML = `${skin[field]} <span class="date-indicator earlier">‚Üë</span>`;
            } else if (guessDateValue > correctDateValue) {
              td.innerHTML = `${skin[field]} <span class="date-indicator later">‚Üì</span>`;
            }
          }
        }
        
        row.appendChild(td);
      });
      
      // Ensuite ajouter la cellule d'image √† la fin
      const imageTd = document.createElement("td");
      imageTd.className = "image-cell";
      
      const img = document.createElement("img");
      img.src = skin.image;
      img.alt = skin.nom;
      img.className = "skin-image";
      imageTd.appendChild(img);
      
      row.appendChild(imageTd);
      
      tbody.appendChild(row);
      
      // V√©rifier si la r√©ponse est correcte
      if (guess === correctName) {
        gameOver = true;
        
        // S√©paration plus claire du message de f√©licitation
        feedback.innerHTML = "<div class='celebration-text'>F√©licitations!</div>" + 
                             "<div class='success-message'>üéâ Vous avez trouv√© le skin correct ! üéâ</div>";
        feedback.classList.add("success", "show");
        
        // Le reste du code reste identique
        resetButton.textContent = "üéÆ Rejouer";
        resetButton.style.display = "block";
        resetButton.classList.add("replay-button", "show");
        
        // Ajouter une animation de confettis
        const confettiContainer = document.createElement("div");
        confettiContainer.className = "confetti-container";
        
        // Cr√©er plusieurs confettis
        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement("div");
          confetti.className = "confetti";
          confetti.style.left = Math.random() * 100 + "%";
          confetti.style.animationDelay = Math.random() * 3 + "s";
          confetti.style.background = `hsl(${Math.random() * 360}, 80%, 60%)`;
          confettiContainer.appendChild(confetti);
        }
        
        document.querySelector(".game-container").appendChild(confettiContainer);
        
      } else if (attempts >= MAX_ATTEMPTS) {
        gameOver = true;
        feedback.textContent = `üíÄ Perdu ! Le skin correct √©tait: ${correctName}`;
        feedback.classList.add("failure", "show"); // Ajouter show pour l'animation
        resetButton.textContent = "Essayer √† nouveau";
        resetButton.style.display = "block";
        resetButton.classList.add("show"); // Ajouter show pour l'animation
      }
      
      input.value = '';
    }

    // Ajoutez cette variable pour suivre l'indice de s√©lection actuel
    let selectedSuggestionIndex = -1;

    // Modifier l'√©v√©nement keydown pour ajouter la navigation clavier
    input.addEventListener('keydown', function(e) {
      // Navigation dans les suggestions avec les fl√®ches haut/bas
      if (suggestionList.classList.contains('active')) {
        const suggestions = suggestionList.querySelectorAll('li');
        
        // Fl√®che bas : s√©lectionner la suggestion suivante
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          selectedSuggestionIndex = Math.min(selectedSuggestionIndex + 1, suggestions.length - 1);
          updateSelectedSuggestion(suggestions);
        }
        
        // Fl√®che haut : s√©lectionner la suggestion pr√©c√©dente
        else if (e.key === 'ArrowUp') {
          e.preventDefault();
          selectedSuggestionIndex = Math.max(selectedSuggestionIndex - 1, -1);
          updateSelectedSuggestion(suggestions);
        }
        
        // Entr√©e : s√©lectionner la suggestion actuelle ou v√©rifier la r√©ponse exacte
        else if (e.key === 'Enter') {
          if (selectedSuggestionIndex >= 0 && selectedSuggestionIndex < suggestions.length) {
            // Utiliser la suggestion s√©lectionn√©e
            const selectedText = suggestions[selectedSuggestionIndex].textContent;
            input.value = selectedText;
            checkAnswer(selectedText);
            suggestionList.classList.remove('active');
            selectedSuggestionIndex = -1;
          } else if (this.value.trim() !== '') {
            // V√©rifier si la r√©ponse exacte existe
            const exactMatch = sortedSkinNames.find(
              skin => skin.toLowerCase() === this.value.toLowerCase()
            );
            
            if (exactMatch) {
              checkAnswer(exactMatch);
            }
            
            suggestionList.classList.remove('active');
          }
        }
        
        // √âchap : fermer la liste de suggestions
        else if (e.key === 'Escape') {
          suggestionList.classList.remove('active');
          selectedSuggestionIndex = -1;
        }
      }
    });

    // Fonction pour mettre √† jour la suggestion s√©lectionn√©e visuellement
    function updateSelectedSuggestion(suggestions) {
      // Supprimer la classe selected de toutes les suggestions
      suggestions.forEach(s => s.classList.remove('selected'));
      
      // Si une suggestion est s√©lectionn√©e, lui ajouter la classe selected
      if (selectedSuggestionIndex >= 0) {
        suggestions[selectedSuggestionIndex].classList.add('selected');
        // Faire d√©filer pour que l'√©l√©ment s√©lectionn√© soit visible
        suggestions[selectedSuggestionIndex].scrollIntoView({ block: 'nearest' });
      } else {
        // Si aucune suggestion n'est s√©lectionn√©e, remettre la valeur d'origine dans l'input
        input.value = input.getAttribute('data-original-value') || input.value;
      }
    }

    // Modifier la fonction input pour sauvegarder la valeur originale
    input.addEventListener('input', function() {
      // Sauvegarder la valeur originale
      this.setAttribute('data-original-value', this.value);
      selectedSuggestionIndex = -1;
      updateSuggestions(this.value);
    });

    // √âcouter les √©v√©nements de saisie sur l'input
    input.addEventListener('input', function() {
      updateSuggestions(this.value);
    });

    // √âcouter les √©v√©nements de touche dans l'input
    input.addEventListener('keydown', function(e) {
      // Si la touche Entr√©e est appuy√©e et qu'il y a une valeur dans l'input
      if (e.key === 'Enter' && this.value.trim() !== '') {
        // Si une seule suggestion est disponible, la s√©lectionner automatiquement
        if (suggestionList.children.length === 1) {
          checkAnswer(suggestionList.children[0].textContent);
        } else {
          // V√©rifier si la r√©ponse exacte existe
          const exactMatch = sortedSkinNames.find(
            skin => skin.toLowerCase() === this.value.toLowerCase()
          );
          
          if (exactMatch) {
            checkAnswer(exactMatch);
          }
        }
        
        suggestionList.classList.remove('active');
      }
    });

    // Cacher les suggestions quand on clique ailleurs
    document.addEventListener('click', function(e) {
      if (e.target !== input && e.target !== suggestionList) {
        suggestionList.classList.remove('active');
      }
    });
  </script>
</body>
</html>
